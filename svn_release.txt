
  ############################################################
  #  Standard operating procedures for `mboost' development  #
  ############################################################ 


  Structure of the repository
  ---------------------------

    pkg/mboostDevel/    current development version
            add bug fixes and new functionality

    pkg/mboostPatch/  current version on CRAN
            add bug fixes only

    devel/  next generation development version; experimental stuff
            add experimental material or
            start new generation package


  Making a patch release
  ----------------------

    A bug was fixed in pkg/mboostPatch/.

    Increase patch level in DESCRIPTION
    Update Date: field in DESCRIPTION
    Update NEWS
    Update Date and Version in /man/mboost_package.Rd

    R CMD build --resave-data --compact-vignettes pkg/mboostPatch
    R CMD check --as-cran mboost_XXX.tar.gz

    If differences to .Rout.save occure:
       - Manually check differences. You might want to use something like:
            
        cd mboost.Rcheck/tests
	    meld Examples/mboost-Ex.Rout.save ../mboost-Ex.Rout &
	or 
	    meld regtest-XXX.Rout.save regtest-XXX.Rout &

       - If ok, copy new .Rout files to .Rout.save:

       	    Rscript copy_Rout_to_Routsave.R "which='mboostPatch'" "vignettes=FALSE"

       - Update vignette .Rout.save files if necessary

            Rscript copy_Rout_to_Routsave.R "which='mboostPatch'" "vignettes=TRUE"

	 For details see 
         http://r.789695.n4.nabble.com/Generate-Rout-save-files-for-vignettes-td4652752.html
    
    Gives no warnings / errors.

    Commit changes to pkg/mboostPatch/

    Add latest svn LATEST version to NEWS

    Now build package without test folder to be submitted to CRAN
       R CMD buildCRAN --resave-data --compact-vignettes pkg/mboostPatch
       R CMD check --as-cran mboost_XXX.tar.gz

    Ftp source package to CRAN.

    Merge changes to R code or documentation to pkg/mboostDevel/
        cd pkg/mboostDevel/R
        svn merge -r(LATEST letzte Version):HEAD --dry-run
            svn+ssh://thothorn@R-Forge.R-project.org/svnroot/mboost/pkg/mboostPatch/R .
        cd ../man
        svn merge -r(LATEST letzte Version)
           svn+ssh://thothorn@R-Forge.R-project.org/svnroot/mboost/pkg/mboostPatch/man
        probabily only *R files in tests
    Make sure not to modify version numbers etc. in pkg/mboostDevel
    and to add recents NEWS to pkg/mboostDevel/NEWS


  Making a minor release
  ----------------------

    Several new tools have been added to pkg/mboostDevel/.

    Increase minor level in DESCRIPTION (patch level 0)
    Update Date: field in DESCRIPTION
    Update NEWS
    Update Date and Version in /man/mboost_package.Rd

    R CMD build --resave-data --compact-vignettes pkg/mboostDevel
    R CMD check --as-cran mboostDevel_XXX.tar.gz

    If differences to .Rout.save occure:
       - Manually check differences
       - If ok, copy new .Rout files to .Rout.save:

       	    Rscript copy_Rout_to_Routsave.R "which='mboostDevel'" "vignettes=FALSE"

       - Update vignette .Rout.save files if necessary

            Rscript copy_Rout_to_Routsave.R "which='mboostDevel'" "vignettes=TRUE"

	 For details see 
         http://r.789695.n4.nabble.com/Generate-Rout-save-files-for-vignettes-td4652752.html

    Gives no warnings / errors.

    Commit changes to pkg/mboostDevel/

    IMPORTANT:
        - Replace all occurences of mboostDevel with mboost:
	     R CMD BATCH change_mboostDevel_to_mboost.R
	     cat change_mboostDevel_to_mboost.Rout
	- Run build and check again on mboost_XXX
	  (*not* mboostDevel this time!)
	- ATTENTION: Do NOT commit the new, modified files to mboostDevel
	  	     (only to mboostPatch and CRAN)

    Ftp source package to CRAN.

    Merge changes to pkg/mboostPatch/
       (NOTE: This should not work that way as we didn't commit the name changes mboostDevel --> mboost.
        However, if one uses this path, change_mboostDevel_to_mboost.R needs to be used with mboostPatch)
       cd pkg/mboostPatch
       svn merge (--dry-run) -r601:HEAD svn+ssh://thothorn@R-Forge.R-project.org/svnroot/mboost/pkg/mboostDevel

       where 601 is the version of the last merge (2.1-0, here)

    After a minor release, pkg/mboostDevel/ and pkg/mboostPatch/ are identical
    (with the exeption of the package names -- mboost vs. mboostDevel).


  Starting a new experimental version
  -----------------------------------

    cd mboost
    svn copy pkg/mboostDevel ng/mboost_XXX

